# æ”¹è¿›å®éªŒè®¾è®¡

## ğŸ¯ å®éªŒç­–ç•¥å»ºè®®

### æ¨èæ–¹æ¡ˆï¼š**å¤šä¸ªå®éªŒï¼ˆAblation Studyï¼‰** â­â­â­â­â­

**åŸå› **ï¼š
1. âœ… **é‡åŒ–è´¡çŒ®**ï¼šå¯ä»¥æ¸…æ¥šçŸ¥é“æ¯ä¸ªæ”¹è¿›çš„è´¡çŒ®
2. âœ… **è®ºæ–‡å†™ä½œ**ï¼šä¾¿äºå†™è®ºæ–‡ï¼Œæœ‰æ¸…æ™°çš„ ablation study
3. âœ… **å‘ç°æ— æ•ˆæ”¹è¿›**ï¼šå¯èƒ½æŸäº›æ”¹è¿›ç»„åˆåæ•ˆæœä¸å¥½
4. âœ… **çµæ´»ç»„åˆ**ï¼šå¯ä»¥æ‰¾åˆ°æœ€ä¼˜çš„å­é›†ç»„åˆ

---

## ğŸ“‹ å®éªŒè®¾è®¡æ–¹æ¡ˆ

### Phase 1: å¿«é€Ÿæ”¹è¿›å®éªŒï¼ˆ1-2å¤©ï¼‰

#### Exp 6.1: æŸ¥è¯¢å¢å¼º (Query Enhancement)
- **æ”¹è¿›**: ç»„åˆ citation_context + source_paper_title + source_paper_abstract
- **åŸºçº¿**: Pipeline Optimized (MRR=0.3428)
- **é¢„æœŸ**: MRR = 0.36-0.38 (+5-10%)
- **å®æ–½éš¾åº¦**: â­ (ç®€å•)
- **æ—¶é—´**: 2-3å°æ—¶

#### Exp 6.2: è´Ÿæ ·æœ¬å¢å¼º (Hard Negative Mining)
- **æ”¹è¿›**: è´Ÿæ ·æœ¬æ•°é‡ 20 â†’ 50-100ï¼ŒåŠ å…¥ hard negatives
- **åŸºçº¿**: L2R Fine-tuned (MRR=0.2922)
- **é¢„æœŸ**: MRR = 0.30-0.32 (+3-8%)
- **å®æ–½éš¾åº¦**: â­â­ (ä¸­ç­‰)
- **æ—¶é—´**: 4-6å°æ—¶ï¼ˆéœ€è¦é‡æ–°è®­ç»ƒï¼‰

---

### Phase 2: ä¸­ç­‰æ”¹è¿›å®éªŒï¼ˆ3-5å¤©ï¼‰

#### Exp 6.3: NPRF (Neural Pseudo-Relevance Feedback)
- **æ”¹è¿›**: å®ç° NPRF æŸ¥è¯¢æ‰©å±•
- **åŸºçº¿**: SPECTER2 Fine-tuned (MRR=0.3173)
- **é¢„æœŸ**: MRR = 0.34-0.36 (+8-15%)
- **å®æ–½éš¾åº¦**: â­â­â­ (è¾ƒå¤æ‚)
- **æ—¶é—´**: 1-2å¤©

#### Exp 6.4: å¢å¼ºç‰¹å¾å·¥ç¨‹ (Enhanced Features)
- **æ”¹è¿›**: 
  - æ·»åŠ  n-gram é‡å ç‰¹å¾
  - å¤šæ¨¡å‹ç›¸ä¼¼åº¦ç‰¹å¾
  - ç‰¹å¾äº¤äº’é¡¹
- **åŸºçº¿**: L2R Fine-tuned (MRR=0.2922)
- **é¢„æœŸ**: MRR = 0.31-0.33 (+5-12%)
- **å®æ–½éš¾åº¦**: â­â­ (ä¸­ç­‰)
- **æ—¶é—´**: 1-2å¤©ï¼ˆéœ€è¦é‡æ–°è®­ç»ƒï¼‰

---

### Phase 3: ç»„åˆå®éªŒï¼ˆ1-2å¤©ï¼‰

#### Exp 6.5: æŸ¥è¯¢å¢å¼º + NPRF
- **ç»„åˆ**: Exp 6.1 + Exp 6.3
- **é¢„æœŸ**: MRR = 0.38-0.42
- **æ—¶é—´**: 1å¤©

#### Exp 6.6: æŸ¥è¯¢å¢å¼º + ç‰¹å¾å·¥ç¨‹
- **ç»„åˆ**: Exp 6.1 + Exp 6.4
- **é¢„æœŸ**: MRR = 0.39-0.43
- **æ—¶é—´**: 1-2å¤©ï¼ˆéœ€è¦é‡æ–°è®­ç»ƒï¼‰

#### Exp 6.7: NPRF + ç‰¹å¾å·¥ç¨‹
- **ç»„åˆ**: Exp 6.3 + Exp 6.4
- **é¢„æœŸ**: MRR = 0.37-0.41
- **æ—¶é—´**: 2-3å¤©ï¼ˆéœ€è¦é‡æ–°è®­ç»ƒï¼‰

#### Exp 6.8: å…¨ç»„åˆ (All Improvements)
- **ç»„åˆ**: Exp 6.1 + Exp 6.2 + Exp 6.3 + Exp 6.4
- **é¢„æœŸ**: MRR = 0.45-0.50
- **æ—¶é—´**: 2-3å¤©ï¼ˆéœ€è¦é‡æ–°è®­ç»ƒï¼‰

---

## ğŸ“Š å®éªŒå¯¹æ¯”è¡¨

| å®éªŒID | å®éªŒåç§° | æ”¹è¿›é¡¹ | åŸºçº¿ | é¢„æœŸMRR | å®æ–½éš¾åº¦ | æ—¶é—´ |
|--------|---------|--------|------|---------|---------|------|
| 6.1 | Query Enhancement | æŸ¥è¯¢å¢å¼º | 0.3428 | 0.36-0.38 | â­ | 2-3h |
| 6.2 | Hard Negative Mining | è´Ÿæ ·æœ¬å¢å¼º | 0.2922 | 0.30-0.32 | â­â­ | 4-6h |
| 6.3 | NPRF | ç¥ç»ä¼ªç›¸å…³åé¦ˆ | 0.3173 | 0.34-0.36 | â­â­â­ | 1-2d |
| 6.4 | Enhanced Features | ç‰¹å¾å·¥ç¨‹ | 0.2922 | 0.31-0.33 | â­â­ | 1-2d |
| 6.5 | Query + NPRF | æŸ¥è¯¢+NPRF | 0.3428 | 0.38-0.42 | â­â­â­ | 1d |
| 6.6 | Query + Features | æŸ¥è¯¢+ç‰¹å¾ | 0.3428 | 0.39-0.43 | â­â­ | 1-2d |
| 6.7 | NPRF + Features | NPRF+ç‰¹å¾ | 0.3173 | 0.37-0.41 | â­â­â­ | 2-3d |
| 6.8 | All Improvements | å…¨ç»„åˆ | 0.3428 | **0.45-0.50** | â­â­â­â­ | 2-3d |

---

## ğŸ¯ æ¨èå®æ–½é¡ºåº

### æ–¹æ¡ˆA: å¿«é€ŸéªŒè¯ï¼ˆæ¨èï¼‰â­â­â­â­â­

**ç›®æ ‡**: å¿«é€Ÿçœ‹åˆ°æ•ˆæœï¼Œç„¶åå†³å®šæ˜¯å¦æ·±å…¥

1. **Exp 6.1** (æŸ¥è¯¢å¢å¼º) - 2-3å°æ—¶
   - æœ€å¿«ï¼Œä¸éœ€è¦é‡æ–°è®­ç»ƒ
   - å¦‚æœæ•ˆæœå¥½ï¼Œç»§ç»­ï¼›å¦‚æœä¸å¥½ï¼Œè°ƒæ•´ç­–ç•¥

2. **Exp 6.3** (NPRF) - 1-2å¤©
   - ä¸éœ€è¦é‡æ–°è®­ç»ƒï¼Œå¯ä»¥å¿«é€ŸéªŒè¯
   - å¦‚æœæ•ˆæœå¥½ï¼Œç»§ç»­

3. **Exp 6.5** (æŸ¥è¯¢+NPRF) - 1å¤©
   - ç»„åˆå‰ä¸¤ä¸ªï¼Œçœ‹ç´¯ç§¯æ•ˆæœ

4. **å¦‚æœæ•ˆæœå¥½ï¼Œå†åš Exp 6.8** (å…¨ç»„åˆ)
   - éœ€è¦é‡æ–°è®­ç»ƒï¼Œä½†é¢„æœŸæ•ˆæœæœ€å¥½

**æ€»æ—¶é—´**: 3-5å¤©

---

### æ–¹æ¡ˆB: å®Œæ•´ Ablation Study â­â­â­â­

**ç›®æ ‡**: å®Œæ•´çš„å®éªŒåˆ†æï¼Œé€‚åˆå†™è®ºæ–‡

1. **Phase 1**: Exp 6.1, 6.2 (å¿«é€Ÿæ”¹è¿›)
2. **Phase 2**: Exp 6.3, 6.4 (ä¸­ç­‰æ”¹è¿›)
3. **Phase 3**: Exp 6.5, 6.6, 6.7 (ä¸¤ä¸¤ç»„åˆ)
4. **Phase 4**: Exp 6.8 (å…¨ç»„åˆ)

**æ€»æ—¶é—´**: 1-2å‘¨

**ä¼˜åŠ¿**: 
- å®Œæ•´çš„ ablation study
- å¯ä»¥å†™è®ºæ–‡
- æ¸…æ¥šçŸ¥é“æ¯ä¸ªæ”¹è¿›çš„è´¡çŒ®

---

### æ–¹æ¡ˆC: åªåšç»¼åˆå®éªŒ â­â­

**ç›®æ ‡**: æœ€å¿«çœ‹åˆ°æœ€ç»ˆæ•ˆæœ

1. **ç›´æ¥åš Exp 6.8** (å…¨ç»„åˆ)

**æ€»æ—¶é—´**: 2-3å¤©

**ç¼ºç‚¹**:
- ä¸çŸ¥é“æ¯ä¸ªæ”¹è¿›çš„è´¡çŒ®
- å¦‚æœæ•ˆæœä¸å¥½ï¼Œä¸çŸ¥é“æ˜¯å“ªä¸ªæ”¹è¿›çš„é—®é¢˜
- ä¸é€‚åˆå†™è®ºæ–‡

---

## ğŸ’¡ æˆ‘çš„å»ºè®®

### æ¨èï¼š**æ–¹æ¡ˆAï¼ˆå¿«é€ŸéªŒè¯ï¼‰**

**ç†ç”±**ï¼š
1. âœ… **å¿«é€Ÿè¿­ä»£**ï¼šå…ˆåšç®€å•æ”¹è¿›ï¼Œå¿«é€Ÿçœ‹åˆ°æ•ˆæœ
2. âœ… **é£é™©æ§åˆ¶**ï¼šå¦‚æœç®€å•æ”¹è¿›æ— æ•ˆï¼Œå¯ä»¥åŠæ—¶è°ƒæ•´
3. âœ… **çµæ´»è°ƒæ•´**ï¼šæ ¹æ®ç»“æœå†³å®šæ˜¯å¦ç»§ç»­
4. âœ… **æ—¶é—´åˆç†**ï¼š3-5å¤©å¯ä»¥å®Œæˆæ ¸å¿ƒæ”¹è¿›

**å…·ä½“æ­¥éª¤**ï¼š
```
Day 1: Exp 6.1 (æŸ¥è¯¢å¢å¼º) â†’ å¦‚æœ MRR > 0.37ï¼Œç»§ç»­
Day 2-3: Exp 6.3 (NPRF) â†’ å¦‚æœ MRR > 0.35ï¼Œç»§ç»­
Day 4: Exp 6.5 (æŸ¥è¯¢+NPRF) â†’ å¦‚æœ MRR > 0.40ï¼Œç»§ç»­
Day 5-7: Exp 6.8 (å…¨ç»„åˆ) â†’ ç›®æ ‡ MRR > 0.45
```

---

## ğŸ”§ å®æ–½ç»†èŠ‚

### Exp 6.1: æŸ¥è¯¢å¢å¼º

**ä¿®æ”¹ä½ç½®**:
- `src/pipeline/multi_stage_pipeline.py` çš„ `retrieve` æ–¹æ³•
- ä¿®æ”¹æŸ¥è¯¢æ–‡æœ¬æ„å»ºé€»è¾‘

**ä»£ç ä¿®æ”¹**:
```python
# å½“å‰
query_text = citation_context

# æ”¹è¿›
source_paper = query.get("source_paper", {})
source_title = source_paper.get("title", "")
source_abstract = source_paper.get("abstract", "")[:200]  # é™åˆ¶é•¿åº¦
query_text = f"{citation_context} {source_title} {source_abstract}".strip()
```

---

### Exp 6.3: NPRF

**éœ€è¦åˆ›å»º**:
- `src/models/retrieval/nprf_retriever.py`
- å®ç° NPRF ç®—æ³•

**é›†æˆæ–¹å¼**:
- å¯ä»¥ä½œä¸º Stage1 çš„ä¸€ä¸ªæ£€ç´¢å™¨
- æˆ–è€…ä½œä¸º Stage2 çš„æŸ¥è¯¢æ‰©å±•æ­¥éª¤

---

## ğŸ“ˆ é¢„æœŸç»“æœå¯¹æ¯”

| å®éªŒ | é¢„æœŸMRR | æå‡ | æ˜¯å¦å€¼å¾— |
|------|---------|------|---------|
| åŸºçº¿ | 0.3428 | - | - |
| 6.1 | 0.36-0.38 | +5-10% | âœ… å€¼å¾— |
| 6.3 | 0.34-0.36 | +8-15% | âœ… å€¼å¾— |
| 6.5 | 0.38-0.42 | +11-22% | âœ…âœ… å¾ˆå€¼å¾— |
| 6.8 | 0.45-0.50 | +31-46% | âœ…âœ…âœ… éå¸¸å€¼å¾— |

---

## ğŸ“ è®ºæ–‡å†™ä½œå»ºè®®

å¦‚æœè¦åš ablation studyï¼Œå¯ä»¥è¿™æ ·ç»„ç»‡ï¼š

1. **Baseline**: Pipeline Optimized (MRR=0.3428)
2. **+Query Enhancement**: Exp 6.1 (MRR=0.37)
3. **+NPRF**: Exp 6.3 (MRR=0.35)
4. **+Query+NPRF**: Exp 6.5 (MRR=0.40)
5. **+All Improvements**: Exp 6.8 (MRR=0.47)

è¿™æ ·å†™è®ºæ–‡æ—¶ï¼Œå¯ä»¥æ¸…æ¥šå±•ç¤ºæ¯ä¸ªæ”¹è¿›çš„è´¡çŒ®ï¼

